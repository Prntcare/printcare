<section id="admin-upload" style="text-align:center; margin:40px 0;">
  <h3>Upload Gallery Images (.dev Panel)</h3>
  <input type="file" id="galleryUpload" multiple accept="image/*">
  <button id="uploadBtn" style="padding:10px 20px; background:#007bff; color:#fff; border:none; border-radius:5px; cursor:pointer;">Upload</button>
  <p id="uploadMsg" style="color:green; margin-top:10px;"></p>
</section>

<script>
const uploadBtn = document.getElementById('uploadBtn');
const galleryUpload = document.getElementById('galleryUpload');
const uploadMsg = document.getElementById('uploadMsg');

uploadBtn.addEventListener('click', ()=>{
  const files = galleryUpload.files;
  if(files.length === 0){ alert('Please select files.'); return; }

  const formData = new FormData();
  for(let i=0;i<files.length;i++){ formData.append('images', files[i]); }

  fetch('/upload', { method: 'POST', body: formData })
    .then(res => res.json())
    .then(data => {
      uploadMsg.textContent = `${data.files.length} image(s) uploaded successfully!`;
      // Add newly uploaded images to gallery dynamically
      data.files.forEach(fileName => {
        const img = document.createElement('img');
        img.src = `assets/gallery/${fileName}`;
        img.alt = fileName;
        img.addEventListener('click', ()=>{ lightbox.style.display='flex'; lightboxImg.src=img.src; });
        galleryContainer.appendChild(img);
        galleryImages.push(fileName);
      });
      galleryUpload.value='';
    })
    .catch(err => {console.error(err); uploadMsg.textContent='Upload failed!';});
});
</script>
